<!DOCTYPE html>
<html lang="zh-cn">
<head>
	<meta name="generator" content="Hugo 0.155.2">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>我们的时光印记</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@300;700&family=Ma+Shan+Zheng&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0/dist/fancybox/fancybox.css"/>
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/sortablejs@latest/Sortable.min.js"></script>

    <link rel="stylesheet" href="/css/style.css">
</head>
<body>

    <div id="page-loader">
        <div class="heart-loader"></div>
        <div class="loading-text">正在收集我们的美好回忆...</div>
    </div>
    
    <div id="danmaku-container"></div>
    <div id="comment-toggle-btn" onclick="openSidebarManually()">💬</div>

    <div id="photo-comment-sidebar">
        <div class="sidebar-header">
            <span>📷 瞬间评论</span>
            <div class="close-sidebar" onclick="closeSidebarManually()">×</div>
        </div>
        <div id="sidebar-comment-list">
            <div style="text-align:center; color:#999; margin-top:20px;">加载中...</div>
        </div>
        <div class="sidebar-input-area">
            <input type="text" id="sidebar-input" placeholder="说说这张照片..." maxlength="50" autocomplete="off" name="comment-text-random">
            <button id="sidebar-btn" onclick="postSidebarComment()">发送</button>
        </div>
    </div>

    <div id="login-trigger" class="float-btn" onclick="toggleModal('login-modal')">🔒 管理员</div>
    <div id="upload-trigger" class="float-btn" onclick="toggleModal('upload-modal')">📷 上传</div>

    <div id="login-modal" class="modal-overlay">
        <div class="modal-box">
            <div class="close-modal" onclick="toggleModal('login-modal')">×</div>
            <h3>管理员登录</h3>
            <input type="text" id="username" class="modal-input" placeholder="账号">
            <input type="password" id="password" class="modal-input" placeholder="密码">
            <button class="modal-btn" onclick="restLogin()">登录</button>
        </div>
    </div>

    <div id="upload-modal" class="modal-overlay">
        <div class="modal-box">
            <div class="close-modal" onclick="toggleModal('upload-modal')">×</div>
            <h3>添加美好瞬间</h3>
            
            <input type="file" id="photo-file" class="modal-input" accept="image/*">
            <p style="font-size:0.8rem; color:#999; margin:-10px 0 10px 0;">(图片可直接上传，视频请用下方链接)</p>
            
            <p style="font-size:0.9rem; color:#ff7675; margin:5px 0;">——— 或者 ———</p>
            
            <input type="text" id="custom-url" class="modal-input" placeholder="粘贴视频或图片链接 (如 /videos/1.mp4)">
            
            <input type="text" id="photo-caption" class="modal-input" placeholder="写一句好看的批注吧">
            <button class="modal-btn" id="upload-btn-action" onclick="uploadMedia()">☁️ 保存到云端</button>
        </div>
    </div>

    <div id="edit-modal" class="modal-overlay">
        <div class="modal-box">
            <div class="close-modal" onclick="toggleModal('edit-modal')">×</div>
            <h3>修改批注</h3>
            <input type="hidden" id="edit-photo-id">
            <input type="text" id="edit-photo-caption" class="modal-input" placeholder="输入新的批注...">
            <button class="modal-btn" onclick="confirmEditPhoto()">💾 保存修改</button>
        </div>
    </div>

    <div id="dm-input-area">
        <input type="text" id="dm-input" placeholder="写下你的comments" maxlength="30">
        <button id="dm-btn">发送 ❤️</button>
    </div>

    <header data-aos="fade-down" data-aos-duration="1000">
        <h1>我们的时光印记</h1>
        <p class="subtitle typing-cursor">记录我们的每一个瞬间</p>
        <div id="love-timer">Loading...</div>
    </header>

    <div class="gallery-grid" id="gallery-grid">
    </div>

    <div id="message-board-section" data-aos="fade-up">
        <div class="board-title">✨ 爱的留言墙 ✨</div>
        <div class="message-list" id="message-list">
            <div class="message-card">Loading...</div>
        </div>
    </div>

    <footer>
        <p>Made with Love ❤️ For You</p>
        <p style="font-size: 0.9rem; margin-top: 5px;">© 2023 - Forever</p>
    </footer>

    <div id="music-playlist" class="music-playlist">
        <div class="playlist-header">🎵 播放列表</div>
        <ul id="playlist-ul"></ul>
        <div class="playlist-control">
            <button onclick="togglePlayPause()" id="mini-control-btn">暂停/播放</button>
        </div>
    </div>

    <div id="music-btn">🎵</div>
    <audio id="bg-audio" loop></audio>

    <script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0/dist/fancybox/fancybox.umd.js"></script>
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    
    <script src="/js/app.js"></script>
</body>
</html>